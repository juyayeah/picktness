<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-Mapper.dtd">
 <mapper namespace="com.pick.board.dao.BoardDAO">
  	<resultMap id="freeBoardResult" type="boardVO">
 		<result property="bno" column="bno"/>
 		<result property="member_id" column="member_id"/>
 		<result property="content" column="content"/>
 		<result property="hastag" column="hastag"/>
 		<result property="boardDate" column="freeDate"/>
 		<result property="todaymill_img" column="todaymill_img"/>
 		</resultMap>
 		  	
 		  	<resultMap id="millBoardResult" type="boardVO">
 		<result property="bno" column="bno"/>
 		<result property="member_id" column="member_id"/>
 		<result property="title" column="title"/>
 		<result property="content" column="content"/>
 		<result property="boardDate" column="millDate"/>
 		</resultMap>
 		
 		 		  	<resultMap id="millreplyResult" type="commentVO">
 		<result property="bno" column="bno"/>
 		<result property="member_id" column="member_id"/>
 		<result property="title" column="title"/>
 		<result property="content" column="content"/>
 		<result property="boardDate" column="millrDate"/>
 		</resultMap>
 		  	
 
 		
 		
 		<select id="selectAllFreeBoardList" resultMap="freeBoardResult">
 		<![CDATA[
 		select * from freeboard
 		]]>
 		</select>
 		<insert id="insertNewFreeBoard" parameterType="java.util.Map">
 		<![CDATA[
 		INSERT into freeboard(title,content,member_id)
 		VALUES(#{title},#{content},#{member_id},)
 		]]>
 		</insert>
 		<insert id ="insertComment" parameterType="commentVO">
 		<![CDATA[ 
 		INSERT into todaymill_reply(p_bno,content,member_id )
 		VALUES(#{p_bno} ,#{content},#{member_id})
 		]]>
 		
 		</insert>
 		
<!--  		<select id="selectAllMillList" resultType="boardVO">
 		<![CDATA[
 		INSERT into todaymill(member_id,title,hastag,content,todaymill_img)
 		VALUES(#{member_id}
 		]]>
 		</select> -->
 		
 		
 		<insert id="insertNewMillBoard" parameterType="java.util.Map">
<![CDATA[
 insert into todaymill(bno, member_id,hastag, content,todaymill_img)
 values(#{bno},#{member_id},#{hastag}, #{content},#{todaymill_img})
 ]]>
</insert>

<delete id="deleteMillBoard" parameterType="int">
<![CDATA[
delete from picktness.todaymill where bno=#{bno}
]]>
</delete>
<delete id="deleteComment" parameterType="int">
<![CDATA[
delete from picktness.todaymill_reply where p_bno=#{bno}
]]>
</delete>

      
      <select id="selectAllMillList" resultMap="millBoardResult">
      <![CDATA[
 		select * from todaymill
 		]]>
      </select>
      <select id="selectNewBoardNO" resultType="int">
 		<![CDATA[
 			select ifnull(max(bno),0)+1 from todaymill
 		]]>
 		</select>
    
    <select id="getMillByBno" resultMap="millBoardResult" parameterType="int">
        <![CDATA[
        SELECT * FROM todaymill WHERE bno = #{bno}
        ]]>
    </select>
    
    <insert id="millreplyResult" parameterType="java.util.Map">
     <![CDATA[
    INSERT INTO comments (bno, p_bno, content, member_id, miirdate)
    VALUES (#{bno}, #{p_bno}, #{content}, #{member_id}, #{miirdate})
    ]]>
</insert>
 	    <select id="getComments" resultType="commentVO" parameterType="int">
        <![CDATA[
        SELECT * FROM todaymill_reply WHERE p_bno = #{bno}
        ]]>
    </select>
   

 	

 	
      
</mapper>